<%- include('../partials/head') %>
  </head>

  <body>
    <%- include('../partials/nav') %>
      <main class="container mx-auto mt-8 p-8 bg-white rounded-lg shadow-md max-w-2xl">
        <h1 class="text-3xl font-bold mb-6 text-center text-gray-800">
          <%= editMode ? 'Edit' : 'Register' %> Your Home on StayEase
        </h1>
        <form action="<%= editMode ? '/host/edit-home/' + home.slug : '/host/add-home' %>" method="POST"
          enctype="multipart/form-data" class="space-y-4">

              <!-- Current Image Display (only in edit mode) -->
              <% if (editMode && home.photoPath) { %>
                <div class="mb-4">
                  <label class="block text-gray-700 font-semibold mb-2">Current Image:</label>
                  <img src="<%= home.photoPath %>" alt="<%= home.houseName %>"
                    class="w-full h-48 object-cover rounded-md border" />
                </div>
                <% } %>
                  
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">House Name</label>
                    <input type="text" name="houseName" value="<%= editMode ? home.houseName : '' %>"
                      placeholder="e.g. Cozy Cottage"
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent" required />
                  </div>

                  <div class="grid grid-cols-2 gap-4">
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">Price per Night (â‚¹)</label>
                      <input type="number" name="price" value="<%= editMode ? home.price : '' %>"
                        placeholder="e.g. 5000"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent" required />
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">Rating</label>
                      <input type="number" step="0.1" min="0" max="5" name="rating" value="<%= editMode ? home.rating : '' %>" placeholder="e.g. 4.8"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent" required />
                    </div>
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                    <input type="text" name="location" value="<%= editMode ? home.location : '' %>" placeholder="e.g. Goa, India"
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent" required />
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Photo</label>
                    <input type="file" name="photo"
                      accept="image/jpeg,image/jpg,image/png,image/gif,image/webp"
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gray-50 file:text-gray-700 hover:file:bg-gray-100" <%= editMode ? '' : 'required' %> />
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                    <textarea name="description" placeholder="Describe your place..." rows="4"
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent" required><%= editMode && home.description ? home.description : '' %></textarea>
                  </div>

                  <button type="submit"
                    class="w-full bg-airbnb hover:bg-airbnb-dark text-white font-bold py-3 px-4 rounded-lg transition duration-300 mt-6">
                    <%= editMode ? 'Update Listing' : 'Create Listing' %>
                  </button>
        </form>
      </main>
  </body>

  </html>