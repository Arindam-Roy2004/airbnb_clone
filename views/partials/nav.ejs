<header class="bg-white border-b border-gray-200 sticky top-0 z-50">
  <nav class="container mx-auto px-4 sm:px-6 lg:px-8 h-20 flex justify-between items-center">
    <!-- Left side - Logo -->
    <a href="/" class="flex items-center gap-2">
      <div class="bg-airbnb rounded-lg p-1.5">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" class="w-6 h-6">
          <path d="M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z" />
          <path d="M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z" />
        </svg>
      </div>
      <span class="text-airbnb font-bold text-xl hidden md:block">StayEase</span>
    </a>

    <!-- Center - Search Bar (Mock) -->
    <div class="hidden md:flex items-center border border-gray-300 rounded-full py-2.5 px-4 shadow-sm hover:shadow-md transition cursor-pointer divide-x divide-gray-300">
      <div class="text-sm font-medium px-4">Anywhere</div>
      <div class="text-sm font-medium px-4">Any week</div>
      <div class="flex items-center gap-3 pl-4">
        <div class="text-sm text-gray-500">Add guests</div>
        <div class="bg-airbnb p-2 rounded-full text-white">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </div>
      </div>
    </div>

    <!-- Right side - Navigation Links -->
    <div class="flex items-center gap-4">
      <% if(isLoggedIn) { %>
        <% if(user && user.role === 'host') { %>
          <a href="/host/host-home-list" class="text-sm font-medium hover:bg-gray-100 px-4 py-2 rounded-full transition">Switch to hosting</a>
        <% } else { %>
           <a href="#" class="text-sm font-medium hover:bg-gray-100 px-4 py-2 rounded-full transition">StayEase your home</a>
        <% } %>
      <% } else { %>
         <a href="#" class="text-sm font-medium hover:bg-gray-100 px-4 py-2 rounded-full transition">StayEase your home</a>
      <% } %>

      <div class="relative">
        <button onclick="toggleDropdown(event)" class="flex items-center gap-2 border border-gray-300 rounded-full p-1 pl-3 hover:shadow-md transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <div class="bg-gray-500 rounded-full p-1 text-white overflow-hidden">
             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
            </svg>
          </div>
        </button>
        
        <!-- Dropdown Menu -->
        <div id="userDropdown" class="absolute right-0 top-full mt-2 w-60 bg-white border border-gray-200 rounded-xl shadow-xl py-2 hidden z-50">
          <% if(isLoggedIn) { %>
            <div class="px-4 py-2 border-b border-gray-100">
              <p class="font-semibold text-sm">Welcome back!</p>
            </div>
            <% if(user && user.role === 'guest') { %>
              <a href="/homes" class="block px-4 py-2 text-sm hover:bg-gray-100">Homes</a>
              <a href="/favourites" class="block px-4 py-2 text-sm hover:bg-gray-100">Favourites</a>
              <a href="/bookings" class="block px-4 py-2 text-sm hover:bg-gray-100">Bookings</a>
            <% } %>
            <% if(user && user.role === 'host') { %>
              <a href="/host/host-home-list" class="block px-4 py-2 text-sm hover:bg-gray-100">Manage Listings</a>
              <a href="/host/add-home" class="block px-4 py-2 text-sm hover:bg-gray-100">Add a Home</a>
            <% } %>
            <div class="border-t border-gray-100 my-1"></div>
            <form action="/logout" method="POST" class="w-full">
              <button type="submit" class="w-full text-left px-4 py-2 text-sm hover:bg-gray-100">Log out</button>
            </form>
          <% } else { %>
            <a href="/login" class="block px-4 py-2 text-sm font-semibold hover:bg-gray-100">Log in</a>
            <a href="/signup" class="block px-4 py-2 text-sm hover:bg-gray-100">Sign up</a>
            <div class="border-t border-gray-100 my-1"></div>
            <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-100">StayEase your home</a>
            <a href="#" class="block px-4 py-2 text-sm hover:bg-gray-100">Help Center</a>
          <% } %>
        </div>
      </div>
    </div>
  </nav>
</header>

<script>
  function toggleDropdown(event) {
    event.stopPropagation();
    const dropdown = document.getElementById('userDropdown');
    dropdown.classList.toggle('hidden');
  }

  // Close dropdown when clicking outside
  document.addEventListener('click', function(event) {
    const dropdown = document.getElementById('userDropdown');
    if (!dropdown.classList.contains('hidden')) {
      dropdown.classList.add('hidden');
    }
  });
</script>